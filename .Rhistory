library(tidyverse)
load("\R\Garantias.Rdata")
load("/R/Garantias.Rdata")
getwd()
load("R/Garantias.Rdata")
View(agrupador_total)
dados_vis <- agrupador_total %>%
filter(Periodo == max(Periodo))
max(agrupador_total$Periodo)
dados_vis <- agrupador_total %>%
filter(Periodo == max(Periodo),
Inicio != Classificador) %>%
dados_vis <- agrupador_total %>%
filter(Periodo == max(Periodo),
Inicio != Classificador)
unique(dados_vis$Classificador)
dados_vis <- agrupador_total %>%
filter(Periodo == max(Periodo),
Inicio != Classificador) %>%
select(Inicio, Classificador, valor = total_total)
dados_vis <- agrupador_total %>%
filter(Periodo == max(Periodo),
Inicio != Classificador) %>%
select(Inicio, Classificador, valor = total_total) %>%
mutate(valor = str_sub(str_sub(as.character(valor), ".", ""), ",", "."))
dados_vis <- agrupador_total %>%
filter(Periodo == max(Periodo),
Inicio != Classificador) %>%
select(Inicio, Classificador, valor = total_total) %>%
mutate(valor = str_replace(str_replace(as.character(valor), ".", ""), ",", "."))
dados_vis <- agrupador_total %>%
filter(Periodo == max(Periodo),
Inicio != Classificador) %>%
select(Inicio, Classificador, valor = total_total) %>%
mutate(valor = str_replace(str_replace_all(as.character(valor), ".", ""), ",", "."))
dados_vis <- agrupador_total %>%
filter(Periodo == max(Periodo),
Inicio != Classificador) %>%
select(Inicio, Classificador, valor = total_total) %>%
mutate(valor = str_replace(str_replace(as.character(valor), "\\.", ""), ",", "\\."))
dados_vis <- agrupador_total %>%
filter(Periodo == max(Periodo),
Inicio != Classificador) %>%
select(Inicio, Classificador, valor = total_total) %>%
mutate(valor = str_replace(str_replace_all(as.character(valor), "\\.", ""), ",", "\\."))
dados_vis <- agrupador_total %>%
filter(Periodo == max(Periodo),
Inicio != Classificador) %>%
select(Inicio, Classificador, valor = total_total) %>%
mutate(valor = as.numeric(
str_replace(str_replace_all(as.character(valor), "\\.", ""), ",", "\\.")))
str_replace(str_replace_all(as.character(valor), "\\.", ""), ",", "\\.")),
rank_geral = rank(valor)) %>%
group_by(Classificador) %>%
mutate(total_classificador = sum(valor),
rank_classificadores = rank(total_classificador)) %>%
ungroup()
dados_vis <- agrupador_total %>%
filter(Periodo == max(Periodo),
Inicio != Classificador) %>%
select(Inicio, Classificador, valor = total_total) %>%
mutate(valor = as.numeric(
str_replace(str_replace_all(as.character(valor), "\\.", ""), ",", "\\.")),
rank_geral = rank(valor)) %>%
group_by(Classificador) %>%
mutate(total_classificador = sum(valor),
rank_classificadores = rank(total_classificador)) %>%
ungroup()
View(dados_vis)
dados_vis_summ <- dados_vis %>%
group_by(Classificador) %>%
summarise(total_classificador = sum(valor),
rank_classificadores = rank(-total_classificador)) %>%
ungroup()
View(dados_vis_summ)
dados_vis_summ <- dados_vis %>%
group_by(Classificador) %>%
summarise(total_classificador = sum(valor)) %>%
ungroup() %>%
mutate(rank_classificadores = rank(-total_classificador))
ggplot(dados_vis_summ, aes(x = Classificador, y = total_classificador)) + geom_col() + coord_flip()
dados_vis_summ <- dados_vis %>%
group_by(Classificador) %>%
summarise(total_classificador = sum(valor)) %>%
ungroup() %>%
mutate(rank_classificadores = rank(-total_classificador)) %>%
right_join(dados_vis)
dados_vis <- agrupador_total %>%
filter(Periodo == max(Periodo),
Inicio != Classificador) %>%
select(Inicio, Classificador, valor = total_total) %>%
mutate(valor = as.numeric(
str_replace(str_replace_all(as.character(valor), "\\.", ""), ",", "\\.")),
rank_geral = rank(-valor))
dados_vis_summ <- dados_vis %>%
group_by(Classificador) %>%
summarise(total_classificador = sum(valor)) %>%
ungroup() %>%
mutate(rank_classificadores = rank(-total_classificador)) %>%
right_join(dados_vis)
dados_vis_pre <- agrupador_total %>%
filter(Periodo == max(Periodo),
Inicio != Classificador) %>%
select(Inicio, Classificador, valor = total_total) %>%
mutate(valor = as.numeric(
str_replace(str_replace_all(as.character(valor), "\\.", ""), ",", "\\.")),
rank_geral = rank(-valor))
dados_vis <- dados_vis_pre %>%
group_by(Classificador) %>%
summarise(total_classificador = sum(valor)) %>%
ungroup() %>%
mutate(rank_classificadores = rank(-total_classificador)) %>%
right_join(dados_vis)
write.csv(dados_vis, file = "webpage/dados_vis.csv")
unique(dados_vis$Classificador)
dput(unique(dados_vis$Classificador))
library(hcl_palettes)
library(colorspace)
hcl_palettes("qualitative", plot = TRUE)
hcl_palettes("qualitative")
hcl_palettes("qualitative", "Dark 3")
qualitative_hcl(6, palette = "Dark 3")
library(tidyverse)
load("R/Garantias.Rdata")
dados_vis_pre <- agrupador_total %>%
filter(Periodo == max(Periodo),
Inicio != Classificador) %>%
select(Inicio, Classificador, valor = total_total) %>%
mutate(valor = as.numeric(
str_replace(str_replace_all(as.character(valor), "\\.", ""), ",", "\\.")),
rank_geral = rank(-valor))
dados_vis <- dados_vis_pre %>%
group_by(Classificador) %>%
summarise(total_classificador = sum(valor)) %>%
ungroup() %>%
mutate(rank_classificadores = rank(-total_classificador)) %>%
right_join(dados_vis)
dados_vis <- dados_vis_pre %>%
group_by(Classificador) %>%
summarise(total_classificador = sum(valor)) %>%
ungroup() %>%
mutate(rank_classificadores = rank(-total_classificador)) %>%
right_join(dados_vis_pre)
View(dados_vis_pre)
write.csv(dados_vis, file = "webpage/dados_vis.csv", fileEncoding = "UTF-8")
dados_vis %>% group_by(Classificador) %>% summary(first(total_classificador))
dados_vis %>% group_by(Classificador) %>% summarize(first(total_classificador))
dados_vis %>% filter(rank_geral>=16) %>% sum(valor)
dados_vis %>% filter(rank_geral>=16) %>% group_by() %>% summarise(sum(valor))
